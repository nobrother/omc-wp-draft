var apps=apps||{};(function($,window,bb,_,apps){_.extend(bb.Validation.callbacks,{valid:function(view,attr,selector){var $el=view.$('[name='+attr+']'),$group=$el.closest('.form-group');$group.removeClass('has-error');$group.find('.help-block').html('').addClass('hidden');},invalid:function(view,attr,error,selector){var $el=view.$('[name='+attr+']'),$group=$el.closest('.form-group');$group.addClass('has-error');$group.find('.help-block').html(error).removeClass('hidden');}});var loginModel=bb.Model.extend({defaults:{username:'',password:''},validation:{username:[{required:true,msg:'We need your username.'},{minLength:3,msg:'At least 3 characters long.'},{maxLength:60,msg:'Cannot more than 60 characters.'}],password:[{required:true,msg:'We need your password as well.'},{minLength:8,msg:'At least 8 characters long.'}]}});var loginView=bb.View.extend({events:{'submit':'submit','change':'updateOnChanged'},initialize:function(){bb.Validation.bind(this);this.listenTo(this.model,'change',this.validate);},submit:function(e){e.preventDefault();this.login();},login:function(){var data=this.$el.serializeObject();if(this.model.isValid(true)){alert('Great Success!');}},updateOnChanged:function(e){var input=$(e.target),name=input.attr('name')||'';if(name)
this.model.set(name,input.val());},validate:function(model){if(model.changed){$.each(model.changed,function(key,value){model.isValid(key,true);})}}});$(function(){var view=new loginView({el:'#form-login',model:new loginModel()});});})(jQuery,window,Backbone,_,apps);